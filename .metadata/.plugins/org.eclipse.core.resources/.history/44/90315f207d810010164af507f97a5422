<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    
    <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/fmt" prefix="fmt" %>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn" %>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Admin</title>
</head>
<body>

	<h2>Admin Dashboard</h2>
	
  <c:choose>
    <c:when test="${not empty students}">
      <c:forEach var="s" items="${students}">
        <div style="border:1px solid #ccc; margin:10px; padding:10px;">
          <p><strong>Student:</strong> ${s.name}</p>
          <p><strong>Email:</strong> ${s.email}</p>
          <p><strong>Institutional Email </strong> ${fn:contains(s.email, 'edu')}</p>
          <p><strong>Join Date:</strong>
            <fmt:formatDate value="${s.joinDate}" pattern="MMM d, yyyy"/>
          </p>
          <p><strong>Fees Paid:</strong>
            <fmt:setLocale value="en_INR"/>
            <fmt:formatNumber value="${s.feesPaid}" type="currency"/> 
          </p>
          <c:if test="${s.feesPaid lt 1000}">
            <p style="color:red;">Warning: Fees not fully paid!</p>
          </c:if>
          <p><strong>Courses Enrolled:</strong></p>
          <ul>
            <c:forEach var="course" items="${fn:split(s.courseList, ',')}">
              <li>${course}</li>
            </c:forEach>
          </ul>
        </div>
      </c:forEach>
    </c:when>
    <c:otherwise>
      <p>No student records found</p>
    </c:otherwise>
  </c:choose>
</body>
</html>